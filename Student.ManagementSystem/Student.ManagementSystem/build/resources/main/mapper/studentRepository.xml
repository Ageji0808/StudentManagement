<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC  "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="raisetech.student.management.repository.StudentsRepository">
  <select id="getAllStudents" resultType="raisetech.student.management.data.Student">
    SELECT *
    FROM student
  </select>
  <select id="findStudentById" resultType="raisetech.student.management.data.Student">
    SELECT *
    FROM student
    WHERE id = #{id}
  </select>
  <insert id="registerStudent" parameterType="raisetech.student.management.data.Student" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO students (name, hurigana, nickname, mailaddress, area, age, sex, remark, deletedFlag)
    VALUES (#{name}, #{hurigana}, #{nickname}, #{mailaddress}, #{area}, #{age}, #{sex}, #{remark}, false)
  </insert>

  <update id="updateStudent" parameterType="raisetech.student.management.data.Student">
    UPDATE students SET name = #{name}, hurigana = #{hurigana}, nickname = #{nickname}, mailaddress = #{mailaddress},
    area = #{area}, age = #{age}, sex = #{sex}, remark = #{remark}, deletedFlag = #{isDeleted} WHERE id = #{id}
  </update>

  <select id="getAllStudentsCourses" resultType="raisetech.student.management.data.StudentsCourse">
    SELECT * FROM studentsCourses
  </select>

  <select id="findStudentsCourseById"  resultType="raisetech.student.management.data.StudentsCourse">
    SELECT * FROM studentsCourses WHERE student_id = #{studentID}
  </select>

  <insert id="registerStudentsCourses" parameterType="raisetech.student.management.data.StudentsCourse" useGeneratedKeys="true" keyProperty="courseID">
    INSERT INTO studentsCourses (student_id, course_name, start_date, end_date)
    VALUES (#{studentID}, #{courseName}, #{startDate}, #{endDate})
  </insert>

  <update id="updateStudentsCourses" parameterType="raisetech.student.management.data.StudentsCourse">
    UPDATE studentsCourses SET course_name = #{courseName} WHERE course_id = #{courseID}
  </update>

</mapper>